---
import Leaderboard from "./Leaderboard.astro";
---

{/* Main controls container */}
<div
	class="absolute flex flex-col items-end gap-2 transition-all top-2 right-2"
>
	{/* Zoom controls */}
	<button
		id="zoomIn"
		class="flex items-center justify-center w-8 h-8 transition-all bg-white rounded-md hover:bg-gray-100 active:bg-gray-200"
		aria-label="Zoom In"
	>
		<i class="text-lg bi bi-plus"></i>
	</button>

	<button
		id="zoomOut"
		class="flex items-center justify-center w-8 h-8 transition-all bg-white rounded-md hover:bg-gray-100 active:bg-gray-200"
		aria-label="Zoom Out"
	>
		<i class="text-lg bi bi-dash"></i>
	</button>

	{/* Toggles leaderboard visibility */}
	<button
		id="leaderboardToggle"
		class="flex items-center justify-center w-8 h-8 transition-all bg-white rounded-md hover:bg-gray-100 active:bg-gray-200"
		aria-label="Toggle Leaderboard Visibility"
	>
		<i class="text-lg text-yellow-500 bi bi-trophy"></i>
	</button>

	{/* Toggles chart visibility */}
	<button
		id="chartToggle"
		class="flex items-center justify-center w-8 h-8 transition-all bg-white rounded-md hover:bg-gray-100 active:bg-gray-200"
		aria-label="Toggle Chart Visibility"
	>
		<i class="text-lg text-teal-500 bi bi-bar-chart"></i>
	</button>
</div>

{/* Legend container for cluster colours */}
<div id="legend" class="absolute p-2 bg-white rounded-lg moveable top-2 left-2">
</div>

{/* Leaderboard container - starts hidden off-screen to the left */}
<div
	id="leaderboardContainer"
	class="absolute top-0 left-0 w-56 transition-all -translate-x-full"
>
	<Leaderboard />
</div>

<script>
	import $ from "jquery";

	$(function () {
		// Define colour ranges for different cluster sizes
		const legendItems = [
			{ range: "Conservation", colour: "#1abc9c" },
			{ range: "Restoration", colour: "#9b59b6" },
			{ range: "Species", colour: "#e74c3c" },
		];

		// Generate HTML for the legend using template literals
		const legendHtml = `
		<h3 class="mb-2 text-sm font-semibold">Clusters</h3>
		<div class="space-y-2">
			${legendItems
				.map(
					(item) => `
				<div class="flex items-center">
					<div class="w-3 h-3 mr-2 rounded-full" style="background-color: ${item.colour};"></div>
					<span class="text-xs">${item.range}</span>
				</div>
			`
				)
				.join("")}
		</div>
		`;

		// Append the generated legend HTML to the legend container
		$("#legend").append(legendHtml);
	});
</script>
